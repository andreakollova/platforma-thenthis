{% extends "base.html" %}

{% block title %}Cvičenie{% endblock %}

{% block content %}
<main class="container py-3">

  {% if is_preview %}
    <div class="alert alert-info">Toto je náhľad tvojho cvičenia. Nezabudni ho publikovať.</div>
  {% endif %}

  <div class="mb-4">
    <h1 class="h3">{{ exercise.title }}</h1>
    <p class="text-muted mb-1">
      Kategória:
      <span class="badge bg-secondary">
        <i class="fab fa-python me-1"></i>{{ exercise.category }} / {{ exercise.subcategory }}
      </span>
    </p>
    <div class="d-flex align-items-center mb-1">
      <span class="text-muted me-2">Autor: </span>
      <img src="{{ url_for('static', filename='uploads/profiles/' ~ author.photo) }}" alt="{{ author.name }}" width="22" height="22" class="rounded-circle me-1">
      <strong class="text-muted">{{ author.name }}</strong>
    </div>
    <p class="mb-3">{{ exercise.full_description }}</p>
  </div>

  <!-- DOPĹŇAČKA alebo KÓD -->
  <div class="border rounded-4 p-4 bg-light">
    <p class="fw-semibold mb-3">Tvoje cvičenie:</p>
    <div class="bg-dark text-white p-3 rounded font-monospace">
<pre class="mb-0"><code>
{{ exercise.code | safe }}
</code></pre>
    </div>
  </div>

  {% if is_preview %}
    <div class="d-flex justify-content-between mt-4">
      <a href="{{ url_for('publish_exercise', id=exercise.id) }}" class="btn btn-success">Publikovať</a>
      <a href="{{ url_for('nove_cvicenie') }}" class="btn btn-outline-secondary">Upraviť</a>
    </div>
  {% endif %}

</main>
{% endblock %}
